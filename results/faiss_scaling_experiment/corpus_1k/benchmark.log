Command: python Scripts/run_faiss_benchmark.py --corpus Data/test_corpus/corpus_sizes/corpus_1k --output results/faiss_scaling_experiment/corpus_1k
Duration: 21.01s
Return code: 0

STDOUT:
======================================================================
Faiss Vector Database Benchmark
======================================================================

[1/7] Setting up output directory...
Output directory: results/faiss_scaling_experiment/corpus_1k

[2/7] Loading test data...

Loading documents from Data/test_corpus/corpus_sizes/corpus_1k...
  Loaded: enwiki-subset.xml (2569280 chars)
Loaded 1 documents
Loaded 10 test cases

[3/7] Initializing embedding generator...
Model: sentence-transformers/all-MiniLM-L6-v2
Type: sentence-transformers

[4/7] Initializing FAISS...
Index path: ./vector_stores/faiss_index.index
Index type: Flat
FAISS version: 1.13.1

[5/8] Creating FAISS index...
Created FAISS Flat index with dimension 384
âœ… FAISS index created

[6/8] Ingesting 1 documents...
Chunk size: 512, Overlap: 50
Strategy: fixed
Chunking 1 documents...
Created 5562 chunks in 0.00s
Generating embeddings...
Generated 5562 embeddings in 13.37s
Inserting into database...
Inserted 5562 chunks in 0.00s
âœ… Ingestion completed in 13.65s
   Documents: 1
   Chunks created: 5562
   Parsing time: 0.00s
   Embedding time: 13.37s
   Insertion time: 0.00s

[7/8] Running query latency and quality benchmark...
Test cases: 10
Top-k values: [1, 3, 5, 10, 20]

  Testing top_k=1...
    Query 5/10: 21.92ms, 1 results, avg_similarity=0.479
    Query 10/10: 22.19ms, 1 results, avg_similarity=0.527
    Avg: 21.03ms, P50: 22.19ms, P95: 58.45ms, QPS: 47.54
    Quality: avg_sim=0.521, top1_sim=0.521
    IR Metrics: Recall@1=0.000, Precision@1=0.000, MRR=0.000

  Testing top_k=3...
    Query 5/10: 9.36ms, 3 results, avg_similarity=0.455
    Query 10/10: 8.43ms, 3 results, avg_similarity=0.512
    Avg: 10.93ms, P50: 9.37ms, P95: 22.59ms, QPS: 91.53
    Quality: avg_sim=0.506, top1_sim=0.521
    IR Metrics: Recall@3=0.000, Precision@3=0.000, MRR=0.000

  Testing top_k=5...
    Query 5/10: 8.55ms, 5 results, avg_similarity=0.448
    Query 10/10: 8.31ms, 5 results, avg_similarity=0.501
    Avg: 10.01ms, P50: 9.93ms, P95: 15.24ms, QPS: 99.94
    Quality: avg_sim=0.497, top1_sim=0.521
    IR Metrics: Recall@5=0.000, Precision@5=0.000, MRR=0.000

  Testing top_k=10...
    Query 5/10: 8.65ms, 10 results, avg_similarity=0.441
    Query 10/10: 7.68ms, 10 results, avg_similarity=0.492
    Avg: 9.05ms, P50: 8.65ms, P95: 13.81ms, QPS: 110.52
    Quality: avg_sim=0.485, top1_sim=0.521
    IR Metrics: Recall@10=0.000, Precision@10=0.000, MRR=0.000

  Testing top_k=20...
    Query 5/10: 8.93ms, 20 results, avg_similarity=0.433
    Query 10/10: 8.15ms, 20 results, avg_similarity=0.480
    Avg: 9.31ms, P50: 8.93ms, P95: 13.64ms, QPS: 107.47
    Quality: avg_sim=0.470, top1_sim=0.521
    IR Metrics: Recall@20=0.000, Precision@20=0.000, MRR=0.000
Disconnected from FAISS

[8/8] Exporting results and generating visualizations...
âœ… Results saved to: results/faiss_scaling_experiment/corpus_1k/results.json
âœ… Performance & quality plot saved to: results/faiss_scaling_experiment/corpus_1k/performance_quality.png

======================================================================
BENCHMARK COMPLETE
======================================================================

Database: Faiss
Documents: 1
Chunks: 5562
Ingestion time: 13.65s

Query Performance & Quality:
Top-K    Avg (ms)     P95 (ms)     QPS        Recall     Precision    MRR       
--------------------------------------------------------------------------------
1        21.03        58.45        47.54      0.000      0.000        0.000     
3        10.93        22.59        91.53      0.000      0.000        0.000     
5        10.01        15.24        99.94      0.000      0.000        0.000     
10       9.05         13.81        110.52     0.000      0.000        0.000     
20       9.31         13.64        107.47     0.000      0.000        0.000     

ðŸ“Š Results: results/faiss_scaling_experiment/corpus_1k/results.json
ðŸ“ˆ Plot: results/faiss_scaling_experiment/corpus_1k/performance_quality.png

âœ… Benchmark complete with IR metrics!
   - Recall@K: Fraction of relevant docs retrieved
   - Precision@K: Fraction of retrieved docs that are relevant
   - MRR: Mean Reciprocal Rank of first relevant result
   - All metrics calculated at document level (not chunk level)


STDERR:
/opt/homebrew/Caskroom/miniconda/base/lib/python3.13/site-packages/transformers/utils/hub.py:110: FutureWarning: Using `TRANSFORMERS_CACHE` is deprecated and will be removed in v5 of Transformers. Use `HF_HOME` instead.
  warnings.warn(

Batches:   0%|          | 0/56 [00:00<?, ?it/s]
Batches:   2%|â–         | 1/56 [00:00<00:18,  2.93it/s]
Batches:   4%|â–Ž         | 2/56 [00:00<00:20,  2.61it/s]
Batches:   5%|â–Œ         | 3/56 [00:00<00:16,  3.26it/s]
Batches:   7%|â–‹         | 4/56 [00:01<00:14,  3.47it/s]
Batches:   9%|â–‰         | 5/56 [00:01<00:13,  3.70it/s]
Batches:  11%|â–ˆ         | 6/56 [00:01<00:12,  4.00it/s]
Batches:  12%|â–ˆâ–Ž        | 7/56 [00:01<00:11,  4.19it/s]
Batches:  14%|â–ˆâ–        | 8/56 [00:02<00:10,  4.38it/s]
Batches:  16%|â–ˆâ–Œ        | 9/56 [00:02<00:12,  3.79it/s]
Batches:  18%|â–ˆâ–Š        | 10/56 [00:02<00:11,  4.04it/s]
Batches:  20%|â–ˆâ–‰        | 11/56 [00:02<00:11,  3.98it/s]
Batches:  21%|â–ˆâ–ˆâ–       | 12/56 [00:03<00:11,  3.99it/s]
Batches:  23%|â–ˆâ–ˆâ–Ž       | 13/56 [00:03<00:10,  4.04it/s]
Batches:  25%|â–ˆâ–ˆâ–Œ       | 14/56 [00:03<00:10,  4.14it/s]
Batches:  27%|â–ˆâ–ˆâ–‹       | 15/56 [00:03<00:09,  4.15it/s]
Batches:  29%|â–ˆâ–ˆâ–Š       | 16/56 [00:04<00:09,  4.15it/s]
Batches:  30%|â–ˆâ–ˆâ–ˆ       | 17/56 [00:04<00:09,  4.11it/s]
Batches:  32%|â–ˆâ–ˆâ–ˆâ–      | 18/56 [00:04<00:09,  4.03it/s]
Batches:  34%|â–ˆâ–ˆâ–ˆâ–      | 19/56 [00:04<00:09,  4.02it/s]
Batches:  36%|â–ˆâ–ˆâ–ˆâ–Œ      | 20/56 [00:05<00:08,  4.16it/s]
Batches:  38%|â–ˆâ–ˆâ–ˆâ–Š      | 21/56 [00:05<00:08,  4.13it/s]
Batches:  39%|â–ˆâ–ˆâ–ˆâ–‰      | 22/56 [00:05<00:08,  4.08it/s]
Batches:  41%|â–ˆâ–ˆâ–ˆâ–ˆ      | 23/56 [00:05<00:08,  4.07it/s]
Batches:  43%|â–ˆâ–ˆâ–ˆâ–ˆâ–Ž     | 24/56 [00:06<00:07,  4.10it/s]
Batches:  45%|â–ˆâ–ˆâ–ˆâ–ˆâ–     | 25/56 [00:06<00:07,  4.11it/s]
Batches:  46%|â–ˆâ–ˆâ–ˆâ–ˆâ–‹     | 26/56 [00:06<00:07,  4.13it/s]
Batches:  48%|â–ˆâ–ˆâ–ˆâ–ˆâ–Š     | 27/56 [00:06<00:07,  4.13it/s]
Batches:  50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 28/56 [00:07<00:06,  4.05it/s]
Batches:  52%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–    | 29/56 [00:07<00:06,  4.20it/s]
Batches:  54%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž    | 30/56 [00:07<00:06,  4.22it/s]
Batches:  55%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ    | 31/56 [00:07<00:05,  4.21it/s]
Batches:  57%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹    | 32/56 [00:07<00:05,  4.41it/s]
Batches:  59%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰    | 33/56 [00:08<00:04,  4.74it/s]
Batches:  61%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    | 34/56 [00:08<00:04,  4.67it/s]
Batches:  62%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž   | 35/56 [00:08<00:04,  4.64it/s]
Batches:  64%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 36/56 [00:08<00:04,  4.44it/s]
Batches:  66%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ   | 37/56 [00:09<00:04,  4.55it/s]
Batches:  68%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š   | 38/56 [00:09<00:03,  4.64it/s]
Batches:  70%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰   | 39/56 [00:09<00:03,  4.74it/s]
Batches:  71%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  | 40/56 [00:09<00:03,  4.44it/s]
Batches:  73%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž  | 41/56 [00:09<00:03,  4.34it/s]
Batches:  75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 42/56 [00:10<00:03,  4.29it/s]
Batches:  77%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹  | 43/56 [00:10<00:02,  4.37it/s]
Batches:  79%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š  | 44/56 [00:10<00:02,  4.31it/s]
Batches:  80%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  | 45/56 [00:10<00:02,  4.25it/s]
Batches:  82%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– | 46/56 [00:11<00:02,  4.35it/s]
Batches:  84%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– | 47/56 [00:11<00:01,  4.52it/s]
Batches:  86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 48/56 [00:11<00:01,  4.40it/s]
Batches:  88%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š | 49/56 [00:11<00:01,  4.30it/s]
Batches:  89%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰ | 50/56 [00:12<00:01,  4.23it/s]
Batches:  91%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ | 51/56 [00:12<00:01,  4.48it/s]
Batches:  93%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Ž| 52/56 [00:12<00:00,  4.39it/s]
Batches:  95%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–| 53/56 [00:12<00:00,  4.25it/s]
Batches:  96%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹| 54/56 [00:12<00:00,  4.25it/s]
Batches:  98%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š| 55/56 [00:13<00:00,  4.29it/s]
Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 56/56 [00:13<00:00,  4.71it/s]
Batches: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 56/56 [00:13<00:00,  4.20it/s]
